#!/bin/sh

# Laravel Cursor Rules Pre-Commit Hook
# This hook automatically checks for and updates Cursor AI rules before each commit

echo "ğŸ” Checking Cursor rules..."

# Run the Laravel command to check for updates
php artisan cursor:rules-update

# Check if the command succeeded
if [ $? -ne 0 ]; then
    echo "âš ï¸  Warning: Failed to check for Cursor rules updates"
    echo "Proceeding with commit anyway..."
fi

# If rules were updated, stage the changes
if [ -n "$(git status --porcelain .cursor/rules/)" ]; then
    echo "ğŸ“ Staging updated Cursor rules..."
    git add .cursor/rules/
fi

exit 0
